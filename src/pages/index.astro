---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import Timeline from "../components/Timeline.astro";
import Projects from "../components/Projects.astro";
import Blog from "../components/Blog.astro";
import Hackathons from "../components/Hackathons.astro";
import Contact from "../components/Contact.astro";

// 1. Import the icons you want to use
import { 
  Briefcase, 
  GraduationCap, 
  Code2, 
  Terminal, 
  Cpu, 
  Globe 
} from "@lucide/astro";

import { getEntry, render } from "astro:content";

const heroEntry = await getEntry("hero", "index");
const aboutEntry = await getEntry("about", "index");
const { Content: AboutContent } = await render(aboutEntry);
const generalEntry = await getEntry("general", "index");
const general = generalEntry.data;

const myTechStack = [
  { name: "Node.js", iconName: "simple-icons:nodedotjs" },
  { name: "Nest JS", iconName: "simple-icons:nestjs" },
  { name: "Express JS", iconName: "simple-icons:express" },
  { name: "PostgreSQL", iconName: "simple-icons:postgresql" },
  { name: "MongoDB", iconName: "simple-icons:mongodb" },
  { name: "RabbitMQ", iconName: "simple-icons:rabbitmq" },
  { name: "Redis", iconName: "simple-icons:redis" },
  { name: "Git", iconName: "simple-icons:git" },
];
---

<Layout
  title={`${heroEntry.data.name} - Portfolio`}
  description={heroEntry.data.description}
>
  <main>
    <Hero hero={heroEntry.data} />

    <!-- <div class="hidden lg:block"> --></div>
     <div class="space-y-10">
      {
        general.showAboutSection && (
          <About
            title={aboutEntry.data.title}
            photo={aboutEntry.data.photo}
            Content={AboutContent}
            link={aboutEntry.data.link}
            techStack={myTechStack} 
          />
        )
      }

      <!-- Work Experience Section -->
      {
        general.showWorkSection && (
          <Timeline
            collection="work"
            variant="timeline"
            color="primary"
            icon={Briefcase}
            sectionTitle="Work Experience"
          />
        )
      }

      <!-- Projects Section -->
      {general.showProjectsSection && <Projects />}

      <!-- Blog Section -->
      {general.showBlogSection && <Blog />}


      <!-- Education Section -->
      {
        general.showEducationSection && (
          <Timeline
            collection="education"
            variant="list"
            color="secondary"
            backgroundColor="base-300"
            icon={GraduationCap}
            sectionTitle="Education"
          />
        )
      }

      <!-- Hackathons Section -->
      {general.showHackathonsSection && <Hackathons />}

      <!-- Contact Section -->
      {general.showContactSection && <Contact />}
    </div>
  </main>
</Layout>